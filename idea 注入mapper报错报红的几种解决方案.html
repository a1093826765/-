<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><meta name="exporter-version" content="Evernote Mac 9.4.8 (461813)"/><meta name="keywords" content="idea, java, springboot"/><meta name="created" content="2020-12-01 01:47:30 +0000"/><meta name="source" content="web.clip7"/><meta name="source-application" content="webclipper.evernote"/><meta name="source-url" content="https://blog.csdn.net/ju_362204801/article/details/105973162"/><meta name="updated" content="2020-12-14 05:46:46 +0000"/><title>idea 注入mapper报错报红的几种解决方案</title></head><body>
  <div style="--en-clipped-content:simplified; --en-clipped-source-url:https://blog.csdn.net/ju_362204801/article/details/105973162; --en-clipped-source-title:idea 注入mapper报错报红的几种解决方案_ju_362204801的博客-CSDN博客_idea mapper报红;">
<div><br/></div><div style="min-height: 3325px; font-size: 16px; display:block; min-width: 100%; "> <div style="background-color:transparent;font:inherit;vertical-align:baseline;"><div style="background-color:transparent;font:inherit;vertical-align:baseline;font-family:&quot;PT Serif&quot;;font-size:16px;line-height:1.5em;color:rgb(31, 9, 9);text-align:left;"><div style="margin:0px;padding:0px;border:0px;font:inherit;vertical-align:baseline;"><div style="margin:0px;padding:0px;border:0px;font:inherit;vertical-align:baseline;width:36em;z-index:200;padding-left:2em;padding-right:2em;margin-left:auto;margin-right:auto;position:relative;"><div style="margin:0px;padding:0px;border:0px;font:inherit;vertical-align:baseline;position:relative;margin-left:-25px;margin-right:25px;"><div style="margin:0px;padding:0px;border:0px;font:inherit;vertical-align:baseline;padding-top:0px;padding-bottom:9em;position:relative;"><div style="margin:0px;padding:0px;border:0px;font:inherit;vertical-align:baseline;margin-bottom:1.5em;"><div style="margin:0px;padding:0px;border:0px;font:inherit;vertical-align:baseline;position:relative;margin-bottom:0px;"><div style="margin:0px;padding:0px;border:0px;font:inherit;vertical-align:baseline;margin-bottom:0px;"><div style="margin:0px;padding:0px;border:0px;font:inherit;vertical-align:baseline;margin-bottom:0px;"><h1 style="font-family:&quot;PT Serif&quot;;text-align:left;border:0px;font:inherit;vertical-align:baseline;font-size:35px;font-weight:normal;line-height:35px;margin-bottom:20px;padding:0px;margin:0px;">idea 注入mapper报错报红的几种解决方案</h1><div style="padding:0px;border:0px;font:inherit;vertical-align:baseline;position:relative;height:1em;line-height:1;text-align:center;margin:0px;padding-top:1.5em;padding-bottom:1.5em;margin-bottom:0px;"><div style="padding:0px;border:0px;font:inherit;vertical-align:baseline;background:-webkit-linear-gradient(0deg, rgb(243, 242, 238) 1%, rgb(31, 9, 9) 50%, rgb(243, 242, 238) 99%);position:absolute;left:-4em;top:50%;z-index:10;width:100%;padding-left:4em;padding-right:4em;height:0.1em;opacity:0.5;margin:0px;margin-bottom:0px;"><span style="font:inherit;position:absolute;left:-4em;top:50%;z-index:10;width:100%;padding-left:4em;padding-right:4em;height:0.1em;margin:0px;opacity:0.5;background:-webkit-linear-gradient(0deg, rgb(243, 242, 238) 1%, rgb(31, 9, 9) 50%, rgb(243, 242, 238) 99%);"/></div></div></div>
    <div style="margin:0px;padding:0px;border:0px;font:inherit;vertical-align:baseline;display:block;">
        <div style="margin:0px;padding:0px;border:0px;font:inherit;vertical-align:baseline;margin-bottom:0px;">
        
                <div style="margin:0px;padding:0px;border:0px;font:inherit;vertical-align:baseline;margin-bottom:0px;">
                    <p style="margin:0px;padding:0px;border:0px;font:inherit;vertical-align:baseline;margin-bottom:1.5em;">相信大家在使用idea的时候一定会遇到这样的问题，就是在service里注入mapper的时候，明明代码没有问题，也可以运行，但是idea它就是给你报个错，有个红色的波浪线在下面，这让人感觉很不舒服。怎么办呢？</p> 
<p style="margin:0px;padding:0px;border:0px;font:inherit;vertical-align:baseline;margin-bottom:1.5em;">先来大概说一下，产生这种现象的原因。idea其实是非常智能的，它可以理解Spring的上下文，然鹅 XxxxMapper 这种接口是Mybatis的，IDEA它理解不了。再加上 @Autowired 这个注解呢，它默认情况下要求依赖对象（也就是 XxxxMapper ）必须存在，而IDEA认为这个对象的实例/代理是个null，所以就友好地给个提示，给你报个红~</p> 
<p style="margin:0px;padding:0px;border:0px;font:inherit;vertical-align:baseline;margin-bottom:1.5em;">今天就说一下以下几种解决方案</p> 
<h2 style="font-family:&quot;PT Serif&quot;;text-align:left;margin:0px;padding:0px;border:0px;font:inherit;vertical-align:baseline;font-weight:bold;font-size:30px;line-height:35px;margin-top:35px;margin-bottom:15px;">方法1：为 @Autowired 注解设置required = false</h2> 
<p style="margin:0px;padding:0px;border:0px;font:inherit;vertical-align:baseline;margin-bottom:1.5em;">使用 @Autowired 注解时，若希望允许null值，可设置required = false</p> 
<p style="margin:0px;padding:0px;border:0px;font:inherit;vertical-align:baseline;margin-bottom:1.5em;">像这样：</p> 
<p style="margin:0px;padding:0px;border:0px;font:inherit;vertical-align:baseline;margin-bottom:1.5em;"/><div style="margin:0px;padding:0px;border:0px;font:inherit;vertical-align:baseline;display:block;text-align:center;margin-bottom:1em;margin-top:1em;"><img src="idea%20%E6%B3%A8%E5%85%A5mapper%E6%8A%A5%E9%94%99%E6%8A%A5%E7%BA%A2%E7%9A%84%E5%87%A0%E7%A7%8D%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88.resources/20200507152127874.png" height="77" width="390"/></div> 这样就不会有警告了。原因很好理解：IDEA认为cashTicketMapper是个null，给了警告；加上required = false后，使用 @Autowired 注解不再去校验userMapper是否存在了，也就不会有警告了。<p style="margin:0px;padding:0px;border:0px;font:inherit;vertical-align:baseline;margin-bottom:1.5em;"/> 
<p style="margin:0px;padding:0px;border:0px;font:inherit;vertical-align:baseline;margin-bottom:1.5em;">但是，这种方式有点蛋疼！一个庞大的既有项目，可能到处都在引用Mapper，总不能到处都补上 required = false 吧。而且对于新手/新员工，很难一眼看懂加required = false属性只是为了解决IDEA的警告。</p> 
<h2 style="font-family:&quot;PT Serif&quot;;text-align:left;margin:0px;padding:0px;border:0px;font:inherit;vertical-align:baseline;font-weight:bold;font-size:30px;line-height:35px;margin-top:35px;margin-bottom:15px;">方法2：用 @Resource 替换 @Autowired</h2> 
<p style="margin:0px;padding:0px;border:0px;font:inherit;vertical-align:baseline;margin-bottom:1.5em;">像这样：</p> 
<p style="margin:0px;padding:0px;border:0px;font:inherit;vertical-align:baseline;margin-bottom:1.5em;"/><div style="margin:0px;padding:0px;border:0px;font:inherit;vertical-align:baseline;display:block;text-align:center;margin-bottom:1em;margin-top:1em;"><img src="idea%20%E6%B3%A8%E5%85%A5mapper%E6%8A%A5%E9%94%99%E6%8A%A5%E7%BA%A2%E7%9A%84%E5%87%A0%E7%A7%8D%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88.resources/2020050715240864.png" height="82" width="389"/></div> 这样也不会再有讨厌的警告。如果你对原因感兴趣，不妨去了解一下@Autowired 与@Resource的区别<p style="margin:0px;padding:0px;border:0px;font:inherit;vertical-align:baseline;margin-bottom:1.5em;"/> 
<p style="margin:0px;padding:0px;border:0px;font:inherit;vertical-align:baseline;margin-bottom:1.5em;">这种方式挺赞，但如果一个项目已经大量使用@Autowired，然后为了个警告到处改成@Resource，也有点蛋疼。</p> 
<h2 style="font-family:&quot;PT Serif&quot;;text-align:left;margin:0px;padding:0px;border:0px;font:inherit;vertical-align:baseline;font-weight:bold;font-size:30px;line-height:35px;margin-top:35px;margin-bottom:15px;">方法3：在Mapper接口上加上@Repository注解</h2> 
<p style="margin:0px;padding:0px;border:0px;font:inherit;vertical-align:baseline;margin-bottom:1.5em;">像这样：</p> 
<p style="margin:0px;padding:0px;border:0px;font:inherit;vertical-align:baseline;margin-bottom:1.5em;"/><div style="margin:0px;padding:0px;border:0px;font:inherit;vertical-align:baseline;display:block;text-align:center;margin-bottom:1em;margin-top:1em;"><img src="idea%20%E6%B3%A8%E5%85%A5mapper%E6%8A%A5%E9%94%99%E6%8A%A5%E7%BA%A2%E7%9A%84%E5%87%A0%E7%A7%8D%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88.resources/20200507152738359.png" height="78" width="591"/></div> 这样也能让你的<p style="margin:0px;padding:0px;border:0px;font:inherit;vertical-align:baseline;margin-bottom:1.5em;"/> 
<p style="margin:0px;padding:0px;border:0px;font:inherit;vertical-align:baseline;margin-bottom:1.5em;">@Autowired<br/> private CashTicketMapper cashTicketMapper;<br/> 不再报错。</p> 
<p style="margin:0px;padding:0px;border:0px;font:inherit;vertical-align:baseline;margin-bottom:1.5em;">当然，如果你用@Component替换@Repository也是可以的。原理大致：IDEA不是认为 userMapper 是个null…</p> 
<p style="margin:0px;padding:0px;border:0px;font:inherit;vertical-align:baseline;margin-bottom:1.5em;">加个@Repository注解或者@Component骗一下IDEA就OK了……</p> 
<p style="margin:0px;padding:0px;border:0px;font:inherit;vertical-align:baseline;margin-bottom:1.5em;">这种方式也比较赞，改动小，也简单，我比较喜欢。</p> 
<h2 style="font-family:&quot;PT Serif&quot;;text-align:left;margin:0px;padding:0px;border:0px;font:inherit;vertical-align:baseline;font-weight:bold;font-size:30px;line-height:35px;margin-top:35px;margin-bottom:15px;">方法4：用Lombok</h2> 
<p style="margin:0px;padding:0px;border:0px;font:inherit;vertical-align:baseline;margin-bottom:1.5em;">像这样：</p> 
<p style="margin:0px;padding:0px;border:0px;font:inherit;vertical-align:baseline;margin-bottom:1.5em;"/><div style="margin:0px;padding:0px;border:0px;font:inherit;vertical-align:baseline;display:block;text-align:center;margin-bottom:1em;margin-top:1em;"><img src="idea%20%E6%B3%A8%E5%85%A5mapper%E6%8A%A5%E9%94%99%E6%8A%A5%E7%BA%A2%E7%9A%84%E5%87%A0%E7%A7%8D%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88.resources/20200507153258886.png" height="175" width="515"/></div> Lombok生成的代码是这样的：<p style="margin:0px;padding:0px;border:0px;font:inherit;vertical-align:baseline;margin-bottom:1.5em;"/> 
<p style="margin:0px;padding:0px;border:0px;font:inherit;vertical-align:baseline;margin-bottom:1.5em;">@Service<br/> public class TestService {<br/>     private CashTicketMapper cashTicketMapper;<br/>     @Autowired<br/>     public TestService(CashTicketMapper cashTicketMapper;) {<br/>         this.cashTicketMapper= cashTicketMapper;<br/>     }<br/> }<br/> 但如果自己手写成Lombok生成的代码，IDEA依然会给你报警告 。我猜，应该是IDEA的Lombok插件把IDEA搞懵逼了…所以不提示了…</p> 
<h2 style="font-family:&quot;PT Serif&quot;;text-align:left;margin:0px;padding:0px;border:0px;font:inherit;vertical-align:baseline;font-weight:bold;font-size:30px;line-height:35px;margin-top:35px;margin-bottom:15px;">方法5：把IDEA的警告关闭掉</h2> 
<p style="margin:0px;padding:0px;border:0px;font:inherit;vertical-align:baseline;margin-bottom:1.5em;">这个方法比较不推荐，感觉没有提示的IDEA是没有灵魂的，所以不推荐。我也从来不去修改IDEA的任何警告设置。</p> 
<p style="margin:0px;padding:0px;border:0px;font:inherit;vertical-align:baseline;margin-bottom:1.5em;">但是大家可以按照下图去试试</p> 
<p style="margin:0px;padding:0px;border:0px;font:inherit;vertical-align:baseline;margin-bottom:1.5em;"/><div style="margin:0px;padding:0px;border:0px;font:inherit;vertical-align:baseline;display:block;text-align:center;margin-bottom:1em;margin-top:1em;"><img src="idea%20%E6%B3%A8%E5%85%A5mapper%E6%8A%A5%E9%94%99%E6%8A%A5%E7%BA%A2%E7%9A%84%E5%87%A0%E7%A7%8D%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88.resources/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2p1XzM2MjIwNDgwMQ==,size_16,color_FFFFFF,t_70" height="715" width="1036"/></div><p style="margin:0px;padding:0px;border:0px;font:inherit;vertical-align:baseline;margin-bottom:1.5em;"/> 
<p style="margin:0px;padding:0px;border:0px;font:inherit;vertical-align:baseline;margin-bottom:1.5em;">好了，以上就是 idea 注入mapper报错报红的几种解决方案，希望对你有所帮助~</p> 
<p style="margin:0px;padding:0px;border:0px;font:inherit;vertical-align:baseline;margin-bottom:0px;">觉得对你有帮助的话，可以点个关注，点个赞，3Q~</p>
                </div>
        </div>
    </div>
</div></div></div></div></div></div></div></div></div></div>
</div>
</body></html>